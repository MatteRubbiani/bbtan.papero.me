{"remainingRequest":"C:\\Users\\matte\\Desktop\\papero\\bbtan.papero.me\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\matte\\Desktop\\papero\\bbtan.papero.me\\src\\views\\Game.vue?vue&type=style&index=0&id=271dbd6a&scoped=true&lang=scss","dependencies":[{"path":"C:\\Users\\matte\\Desktop\\papero\\bbtan.papero.me\\src\\views\\Game.vue","mtime":1620283362610},{"path":"C:\\Users\\matte\\Desktop\\papero\\bbtan.papero.me\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\matte\\Desktop\\papero\\bbtan.papero.me\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\matte\\Desktop\\papero\\bbtan.papero.me\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\matte\\Desktop\\papero\\bbtan.papero.me\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\matte\\Desktop\\papero\\bbtan.papero.me\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\matte\\Desktop\\papero\\bbtan.papero.me\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQokdGhlbWUtY29sb3I6ICMyNTdhMDA7DQokc2Vjb25kLWNvbG9yOiAjZmZmZmZmOw0KDQouaG9tZV93cmFwcGVyew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAkc2Vjb25kLWNvbG9yOw0KfQ0K"},{"version":3,"sources":["C:\\Users\\matte\\Desktop\\papero\\bbtan.papero.me\\src\\views\\Game.vue"],"names":[],"mappings":";AA6EA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACrB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;AAEtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjC","file":"C:/Users/matte/Desktop/papero/bbtan.papero.me/src/views/Game.vue","sourceRoot":"","sourcesContent":["<template>\r\n<div class=\"home_wrapper\">\r\n  <UserHamburgerMenu :show=\"showHamburgerMenu\"\r\n                     :src=\"require('@/assets/hamburger_icon_dark.png')\"\r\n                     @toggle-show=\"showHamburgerMenu=$event\"/>\r\n  <ActionsMenu :highest-score=\"game.highestScore\"></ActionsMenu>\r\n  <GameScene></GameScene>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport store from \"../store\";\r\n//import mitt from \"mitt\"\r\n\r\nimport UserHamburgerMenu from \"../components/UserHamburgerMenu\";\r\nimport ActionsMenu from \"../components/ActionsMenu\";\r\nimport GameScene from \"../components/GameScene\";\r\nimport {urls} from \"../constants/constants\";\r\n\r\n//window.mitt = window.mitt ||  new mitt()\r\n\r\nexport default {\r\n  name: \"Game\",\r\n  components: {GameScene, ActionsMenu, UserHamburgerMenu},\r\n  data() {\r\n    return {\r\n      showHamburgerMenu: false,\r\n      game: {highestScore: 0}\r\n    }\r\n  },\r\n  methods: {\r\n    createNewGame(){\r\n      let blocks = [1, 0, 1, 1, 1]\r\n      return {\r\n        blocks,\r\n        level: 1\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    axios.get(urls.game).then((res) => {\r\n      this.game = res.data ? res.data : this.createNewGame()\r\n    })\r\n  },\r\n  async beforeMount() {\r\n    const createLocalAccount = async () => {\r\n      await axios\r\n          .get(urls.createLocalAccountUrl)\r\n          .then((response) => {\r\n            store.dispatch(\"setLogged\", false);\r\n            store.dispatch(\"setUsername\", response.data.username);\r\n          })\r\n          .catch(() => {\r\n            location.href = location.origin + \"/error?from=\" + location.pathname;\r\n          });\r\n    }\r\n    if (store.state.logged === -1 || store.state.username === \"\") {\r\n      await axios.get(urls.getLoginInfoUrl)\r\n          .then(async response => {\r\n            if (!response.data) await createLocalAccount();\r\n            else {\r\n              await store.dispatch(\"setLogged\", response.data.google_signed_in);\r\n              await store.dispatch(\"setUsername\", response.data.username);\r\n            }\r\n          })\r\n          .catch(() => {\r\n            location.href = location.origin + \"/error?from=\" + location.pathname;\r\n          });\r\n    } else if(store.state.username === null && store.state.logged === false) {\r\n      await createLocalAccount();\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n$theme-color: #257a00;\r\n$second-color: #ffffff;\r\n\r\n.home_wrapper{\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  background-color: $second-color;\r\n}\r\n</style>"]}]}